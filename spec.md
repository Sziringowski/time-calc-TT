# Time calculation (TT)

## User Story

**Я, как** менеджер проекта  
**Хочу** уметь расчитывать временные затраты на проект  
**Чтобы** иметь возможность точнее планировать рабочий процесс и определить стоимость работ.

## Acceptance criteria

1. Модель вычисляет значение времязатрат по заданым параметрам.
2. Вычисляются метрики модели ($R^2$, $R^2_{adj}$, RRMSE).
3. Валидируется дата с возможностью автоочистки данных от выбросов.
4. Выполняется анализ данных: корреляция фич, матрица пропусков, распределение фич.
5. Реализована бд для удобного взаимодействия в воспринимаемом виде.
6. Реализована возможность дообучения/переобучения модели на уровне выбора пути для тренировочной даты.

## Terms

* **Проект** \- шрифт, разрабатываемый по требованиям Заказчика.
* **Целевое значение** \- временные затраты на проект на конкретном этапе разработки.
* **Таргет-вектор** \- вектор целевых значений.
* **Модель** \- совокупность скриптов, документации и базы данных, является объектом спецификации.

## Structure

* time-calc-TT
  * database.xlsx
  * scripts
    * s_1
    * s_2
  * UI-cover
  * spec.md

## Use Cases

### UC-time-computation

* **Описание**: Пользователь может получить расчётные временные затраты на проект с детализацией по этапам разработки
* **Акторы**: Пользователь, Модель
* **Предусловие**: Пользователь устанавливает конфигурационные параметры Модели и нажимает UI-действие "Calculate"
* **Сценарий**:

  1. Пользователь устанавливает конфигурационные параметры Модели и нажимает UI-действие "Calculate".
  2. Модель выполняет валидацию конфигурационных значений.
  * Opt. i:
    1. Модель выполняет вычисления для предобученых моделей для всех компонент таргет-вектора.
    2. Модель выводит таргет-вектор в формате (каком? JSON например).
  * Opt. j :
    1. Модель оповещает Пользователя об ошибке при заполении параметров.

* **Результат**: Пользователь получил таргет-вектор или уведомление об ошибке.

### UC-database

* **Описание**: Пользователь может получить отчёт по времязатратам на завершённых проектах.
* **Акторы**: Пользователь, Модель
* **Предусловие**: Пользователь нажимает UI-действие "Completed Projects"
* **Сценарий**:

  1. Пользователь нажимает UI-действие "Completed Projects".
  2. Модель осуществляет проверку обновления частных отчётов .xlsx-формата в директории ../проекты.
  3. Модель обновляет внутреннюю базу данных проектов.
  4. Модель выводит в (любом удобном табличном) формате данные о времязатратах по выполненым проектам.

* **Результат**: Пользователь получил отчёт.

## Functional requirements

### fr-config-1

Модель поддерживает конфигурационные параметры и их значения в соответствии со следующей таблицей:

<table>
  <tr>
    <td>Наименование</td>
    <td>Системное наименование</td>
    <td>Тип данных</td>
    <td>Тип признака</td>
    <td>Допустимые значения</td>
  </tr>
  <tr>
    <td>количество глифов</td>
    <td>n_gliphs</td>
    <td>int</td>
    <td>continual</td>
    <td>0,1,2...</td>
  </tr>
  <tr>
    <td>количество начертаний</td>
    <td>n_styles</td>
    <td>int</td>
    <td>continual</td>
    <td>0,1,2...</td>
  </tr>
  <tr>
    <td>тип шрифта</td>
    <td>font_type</td>
    <td>choice</td>
    <td>categorial</td>
    <td>антиква (antiqua)<br>гротеск (grotesque)<br>разностильный (mixed)<br>рукописный (handwritten)<br>лого (logo)</td>
  </tr>
  <tr>
    <td>есть ли наклонное начертание</td>
    <td>is_italic</td>
    <td>boolean</td>
    <td>categorial</td>
    <td>True/False</td>
  </tr>
  <tr>
    <td>ручной хинтинг</td>
    <td>is_hinting_manual</td>
    <td>boolean</td>
    <td>categorial</td>
    <td>True/False</td>
  </tr>
  <tr>
    <td>тип расчёта</td>
    <td>calc_type</td>
    <td>choice</td>
    <td>categorial</td>
    <td>новый (new)<br>обновление (upd)<br>тех обновление (tech_upd)<br>лого (logo)<br>кастом (custom)<br>кириллизация (cyrillization)</td>
  </tr>
</table>

Конфигурационные параметры передаются Заказчиком и устанавливаются Пользователем.

### fr-config-2

Установленые Пользователем конфигурационные параметры хранятся в JSON-объекте, имеющем следующую структуру:

```json
{
  "n_gliphs": "",
  "n_styles": "",
  "font_type": "",
  "is_italic": "",
  "is_hinting_manual": "",
  "calc_type": ""
}
```

### fr-config-3

Следующие значения определены как **тагрет-значения** Модели:

* частные таргеты (ч.):
  * время, потраченное на скетч (`t_sketch`)
  * время, потраченное на прямые (`t_straight`)
  * время, потраченное на наклонные (`t_angled`)
  * время, потраченное на мастеринг (`t_mast`)
  * время, потраченное на кернинг (`t_kern`)
  * время, потраченное на хинтинг (`t_hint`)

* общее время (ч.) (`t_total`) - сумма частных таргетов

### fr-arch-1

Модель содержит 6 скриптов предсказательных алгоритмов для каждого из частных таргет-значений.

### fr-arch-2

* Модель содержит **базу данных**, представляющую собой .xlsx-таблицу, с атрибутами, соответствующими системным наименованиям в [таблице](#fr-config-1).
* Модель поддерживает обновление (актуализацию) базы данных.
* Модель валидирует значения атрибутов записей, заносимых в базу данных, согласно допустимым значениям атрибутов [таблицы](#fr-config-1).
